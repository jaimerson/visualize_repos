{"version":3,"sources":["app/api/index.js","app/api/repositories.js","app/app.js","app/initialize.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAdA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvCA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9GA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAAA","file":"public/app.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _repositories = require('./repositories');\n\nObject.defineProperty(exports, 'numberOfRepositories', {\n  enumerable: true,\n  get: function get() {\n    return _repositories.numberOfRepositories;\n  }\n});\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.numberOfRepositories = numberOfRepositories;\nvar baseURL = 'https://api.github.com/search/';\n\nvar fetchNumber = function fetchNumber(language) {\n  return fetch(baseURL + 'repositories?q=+language:' + language).then(function (response) {\n    return response.json().then(function (json) {\n      return json['total_count'];\n    });\n  });\n};\n\nvar cachedNumber = function cachedNumber(language) {\n  return localStorage.getItem('repo_viz_numbers_' + language);\n};\n\nvar saveCachedNumber = function saveCachedNumber(language, number) {\n  localStorage.setItem('repo_viz_numbers_' + language, number);\n};\n\n// returns a promise with a value\nfunction numberOfRepositories(language) {\n  if (cachedNumber(language)) {\n    return new Promise(function (resolve) {\n      return resolve(cachedNumber(language));\n    });\n  }\n  var number = fetchNumber(language);\n\n  number.then(function (n) {\n    return saveCachedNumber(language, n);\n  });\n\n  return number;\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.App = App;\n\nvar _api = require('api');\n\nvar _d = require('d3');\n\nvar d3 = _interopRequireWildcard(_d);\n\nvar _d3Scale = require('d3-scale');\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar languages = ['ruby', 'javascript', 'java', 'go', 'elixir', 'haskell', 'c', 'cpp', 'lua', 'python'];\n\nvar forceStrength = 0.063;\nvar color = d3.scaleOrdinal(_d3Scale.schemeCategory10);\n\nvar formatNumber = function formatNumber(number) {\n  return number.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\");\n};\n\nvar renderChart = function renderChart(data) {\n  var maxHeight = window.innerHeight;\n  var maxWidth = window.innerWidth;\n\n  var radiusScale = d3.scalePow().exponent(0.5).range([50, maxHeight * 0.3]).domain([0, 40 * d3.max(data, function (d) {\n    return d.amount;\n  })]);\n\n  var svg = d3.select('body').append('svg').attr('width', maxWidth).attr('height', maxHeight).attr('class', 'bubbles');\n\n  var charge = function charge(d) {\n    Math.pow(d.radius, 2.0) * forceStrength;\n  };\n\n  var ticked = function ticked() {\n    svg.selectAll('.bubble').attr('transform', function (d) {\n      return 'translate(' + (d.x - d.radius / 2) + ', ' + (d.y - d.radius / 2) + ')';\n    });\n  };\n\n  var simulation = d3.forceSimulation().velocityDecay(0.2).force('x', d3.forceX().strength(forceStrength).x(maxWidth / 2)).force('y', d3.forceY().strength(forceStrength).y(maxHeight / 2)).force('collide', d3.forceCollide(function (d) {\n    return d.radius * 1.2;\n  }).iterations(2)).on('tick', ticked);\n\n  var nodes = data.map(function (d) {\n    return {\n      radius: radiusScale(d.amount),\n      x: Math.random() * maxWidth,\n      y: Math.random() * maxHeight,\n      amount: d.amount,\n      name: d.name\n    };\n  });\n\n  var bubbles = svg.selectAll('.bubble').data(nodes, function (d) {\n    return d.id;\n  });\n\n  var bubblesE = bubbles.enter().append('g').classed('bubble', true).attr('transform', function (d) {\n    return 'translate(' + d.x + ', ' + d.y + ')';\n  });\n\n  bubblesE.append('circle').attr('r', function (d) {\n    return d.radius;\n  }).style('fill', function (d) {\n    return color(d.amount);\n  });\n\n  bubblesE.append('text').attr('text-anchor', 'middle').style('fill', 'white').text(function (d) {\n    return d.name;\n  });\n\n  bubblesE.append('text').attr('y', '15').attr('text-anchor', 'middle').style('fill', 'white').text(function (d) {\n    return formatNumber(d.amount) + ' repos';\n  });\n\n  bubbles = bubbles.merge(bubblesE);\n\n  simulation.nodes(nodes);\n};\n\nvar fetchData = function fetchData() {\n  var data = [];\n\n  return new Promise(function (resolve, _) {\n    languages.forEach(function (lang) {\n      (0, _api.numberOfRepositories)(lang).then(function (number) {\n        console.log(lang + ' has ' + number + ' repos on github.');\n        data.push({ name: lang, amount: number });\n      });\n    });\n    resolve(data);\n  });\n};\n\nfunction App() {\n  return {\n    render: function render(container) {\n      fetchData().then(function (data) {\n        renderChart(data);\n      });\n    }\n  };\n}\n","'use strict';\n\nvar _app = require('app');\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  // do your setup here\n  console.log('Initialized app');\n\n  var container = document.getElementById('app');\n  var body = (0, _app.App)().render(container);\n\n  document.body.appendChild(container);\n});\n"]}